<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition template="/tmpl/MainWindow.xhtml">

        <ui:define name="breadcrumblist">
            <li class="breadcrumb-item active">#{ism.CrumbProcess}</li>
            <li class="breadcrumb-item active"><p:link value="#{ism.CrumbAnalyseAllowed}" outcome="/company/process/ctrl/AnalyseAllowed/List.xhtml?faces-redirect=true"/></li>
            <li class="breadcrumb-item active" aria-current="page">#{ism.CrumbManage}</li>
        </ui:define>

        <ui:define name="body">

            <style>
                .ui-picklist-list-wrapper{width: 100%!important;}
                .ui-picklist-buttons-cell{ max-width: 32px!important;}
                .ui-cell-editor-input input{ width: 100%!important; height: 1.7em!important;}
            </style>

            <h:form id="bodyForm">

                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="input-group input-group-sm mb-2 ">
                                <div class="input-group-addon input-group-sm" style="width:150px;">
                                    <span class="input-group-text">#{ism.Mode}</span>
                                </div>
                                <p:selectOneButton id="fieldMode" 
                                                   value="#{analyseAllowedView.displayMode}" 
                                                   class="form-control pr-0 py-0 mr-0"

                                                   >
                                    <p:ajax event="change" update=":bodyForm, datalist, :growl" listener="#{analyseAllowedView.onDisplayModeChanged()}"/>
                                    <f:selectItem itemLabel="#{ism.AnalyseAllowedField_aaPoint}" itemValue="1"  />
                                    <f:selectItem itemLabel="#{ism.AnalyseAllowedField_aaType}" itemValue="2"/>
                                </p:selectOneButton>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <div class="input-group input-group-sm mb-2 ">
                                <div class="input-group-addon input-group-sm" style="width:150px;">
                                    <span class="input-group-text">
                                        <p:outputLabel value="#{ism.AnalyseAllowedField_aaPoint}"  for="aaPoint"  rendered="#{analyseAllowedView.displayMode==1?true:false}"/>
                                        <p:outputLabel value="#{ism.AnalyseAllowedField_aaType}"  for="aaType" rendered="#{analyseAllowedView.displayMode==2?true:false}"/>
                                    </span>
                                </div>

                                <h:panelGrid columns="2" class="form-control pr-0 py-0 mr-0"  rendered="#{analyseAllowedView.displayMode==1?true:false}">                
                                    <p:selectOneMenu id="aaPoint"  widgetVar="aaPoint" style="width:410px;"
                                                     filter="true" filterMatchMode="contains"
                                                     class="form-control pr-0 py-0 mr-0"
                                                     value="#{analyseAllowedView.selected.aaPoint}"
                                                     converter="#{analysePointConverter}"
                                                     required="false" requiredMessage="#{ism.AnalyseAllowedRequiredMsg_aaPoint}"
                                                     valueChangeListener="#{analyseAllowedView.handleAnalysePointChanged}"
                                                     >
                                        <p:ajax event="change"  update="westGroup @form, :growl" />
                                        <f:selectItem itemLabel="#{ism.SelectList}" itemValue="#{null}"/>
                                        <f:selectItems value="#{analysePointController.itemsAvailableSelectOne}"
                                                       var="aaPointItem"
                                                       itemLabel="#{aaPointItem.apPoint} - #{aaPointItem.apDesignation}" 
                                                       itemValue="#{aaPointItem}"/>
                                    </p:selectOneMenu>
                                    <p:message for="aaPoint" />
                                </h:panelGrid>

                                <h:panelGrid columns="2" class="form-control pr-0 py-0 mr-0" rendered="#{analyseAllowedView.displayMode==2?true:false}">                    
                                    <p:selectOneMenu id="aaType"  widgetVar="aaType"  style="width:410px;"
                                                     filter="true" filterMatchMode="contains"
                                                     class="form-control pr-0 py-0 mr-0"
                                                     value="#{analyseAllowedView.selected.aaType}"
                                                     converter="#{analyseTypeConverter}"
                                                     required="false" requiredMessage="#{ism.AnalyseAllowedRequiredMsg_aaType}" 
                                                     valueChangeListener="#{analyseAllowedView.handleAnalyseTypeChanged}"
                                                     >
                                        <p:ajax event="change"  update="westGroup @form, :growl" />
                                        <f:selectItem itemLabel="#{ism.SelectList}" itemValue="#{null}"/>
                                        <f:selectItems value="#{analyseTypeController.itemsAvailableSelectOne}"
                                                       var="aaTypeItem"
                                                       itemLabel="#{aaTypeItem.atType} - #{aaTypeItem.atDesignation}" 
                                                       itemValue="#{aaTypeItem}"/>
                                    </p:selectOneMenu>
                                    <p:message for="aaType" />
                                </h:panelGrid>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-3">
                            <p:pickList id="analysePointPickList" value="#{analyseAllowedView.analyseTypeModel}" 
                                        var="type" effect="bounce"
                                        itemLabel="#{type}"
                                        itemValue="#{type}"

                                        showCheckbox="true" responsive="true"
                                        showSourceFilter="true" showTargetFilter="true"
                                        filterMatchMode="contains" converter="#{analyseTypeConverter}"
                                        rendered="#{analyseAllowedView.selected.aaPoint!=null and analyseAllowedView.displayMode==1}"
                                        >

                                <f:facet name="sourceCaption">#{ism.Unaffected}</f:facet>
                                <f:facet name="targetCaption">#{ism.Affected}</f:facet>

                                <p:ajax event="transfer" listener="#{analyseAllowedView.handleAnalyseTypeTransfer}" update="bodyForm, datalist,:growl" />
                                <p:ajax event="select" listener="#{analyseAllowedView.handleAnalyseTypeSelect}" update="bodyForm:MsgDetail,  :growl" />
                                <p:ajax event="unselect" listener="#{analyseAllowedView.handleAnalyseTypeUnSelect}" update="bodyForm:MsgDetail,  :growl" />
                                <p:ajax event="reorder" listener="#{analyseAllowedView.handleAnalyseTypeReorder}" update="bodyForm:MsgDetail, bodyForm, datalist, :growl" />

                                <p:column style="width:90%;">
                                    <h:outputText value="#{type}" style="font-size: 0.7em;" />
                                </p:column> 
                            </p:pickList>  

                            <p:pickList id="analyseTypePickList" value="#{analyseAllowedView.analysePointModel}" 
                                        var="point" effect="bounce"
                                        itemLabel="#{point}"
                                        itemValue="#{point}"

                                        showCheckbox="true" responsive="true"
                                        showSourceFilter="true" showTargetFilter="true"
                                        filterMatchMode="contains" converter="#{analysePointConverter}"
                                        rendered="#{analyseAllowedView.selected.aaType!=null and analyseAllowedView.displayMode==2}"
                                        >

                                <f:facet name="sourceCaption">#{ism.Unaffected}</f:facet>
                                <f:facet name="targetCaption">#{ism.Affected}</f:facet>

                                <p:ajax event="transfer" listener="#{analyseAllowedView.handleAnalysePointTransfer}" update="bodyForm, datalist,:growl" />
                                <p:ajax event="select" listener="#{analyseAllowedView.handleAnalysePointSelect}" update="bodyForm:MsgDetail,  :growl" />
                                <p:ajax event="unselect" listener="#{analyseAllowedView.handleAnalysePointUnselect}" update="bodyForm:MsgDetail,  :growl" />
                                <p:ajax event="reorder" listener="#{analyseAllowedView.handleAnalysePointReorder}" update="bodyForm:MsgDetail, bodyForm, datalist, :growl" />

                                <p:column style="width:90%;">
                                    <h:outputText value="#{point}" style="font-size: 0.7em;" />
                                </p:column> 
                            </p:pickList>  
                        </div>   


                        <div class="col-md-9">
                            <p:dataTable id="datalist" widgetVar="datalist"
                                         var="item"
                                         value="#{analyseAllowedView.preset}"
                                         rowKey="#{item.aaType}"
                                         selection="#{analyseAllowedView.selections}"
                                         rowSelectMode="checkbox"
                                         editable="true"
                                         rendered="#{analyseAllowedView.preset!=null and !analyseAllowedView.preset.isEmpty()}"
                                         >

                                <p:ajax event="rowEdit" listener="#{analyseAllowedView.onRowEdit}" update="bodyForm:MsgDetail,:growl" />
                                <p:ajax event="rowEditCancel" listener="#{analyseAllowedView.onRowCancel}" update="bodyForm:MsgDetail,:growl" />



                                <p:column selectionMode="multiple" style="text-align:center" width="72" 
                                          selectRow="true" >
                                    <p:rowEditor style="display:inline;"/>
                                </p:column>


                                <p:column headerText="#{ism.AnalyseAllowedField_aaId}" width="48"
                                          sortBy="#{item.aaId}" filterBy="#{item.aaId}" 
                                          filterMatchMode="contains" >
                                    <div class="text-right">
                                        <h:outputText class="text-right" value="#{item.aaId}" >
                                            <f:convertNumber  locale="fr_FR" />
                                        </h:outputText>
                                    </div>
                                </p:column>



                                <p:column headerText="#{ism.AnalyseAllowedField_aaPoint}" 
                                          sortBy="#{item.aaPoint}" 
                                          filterBy="#{item.aaPoint}" 
                                          rendered="#{analyseAllowedView.displayMode==2}"
                                          >
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('datalist').filter()"
                                                         filter="true" filterMatchMode="contains">
                                            <f:selectItem itemLabel="#{ism.SelectList}" itemValue="#{null}"  />
                                            <f:selectItems value="#{analysePointController.itemsAvailableSelectOne}" 
                                                           var="point"
                                                           itemLabel="#{point.apPoint} - #{point.apDesignation}"
                                                           itemValue="#{point}"
                                                           /> 
                                        </p:selectOneMenu>
                                    </f:facet> 
                                    <h:outputText value="#{item.aaPoint.apPoint} - #{item.aaPoint.apDesignation}"/>
                                </p:column>

                                <p:column headerText="#{ism.AnalyseAllowedField_aaType}" 
                                          sortBy="#{item.aaType}" 
                                          filterBy="#{item.aaType}" rendered="#{analyseAllowedView.displayMode==1}">
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('datalist').filter()" filter="true" filterMatchMode="contains">
                                            <f:selectItem itemLabel="#{ism.SelectList}" itemValue="#{null}"  />
                                            <f:selectItems value="#{analyseTypeController.itemsAvailableSelectOne}" 
                                                           var="type"
                                                           itemLabel="#{type.atType} - #{type.atDesignation}"
                                                           itemValue="#{type}"
                                                           /> 
                                        </p:selectOneMenu>
                                    </f:facet> 
                                    <h:outputText value="#{item.aaType.atType} - #{item.aaType.atDesignation}"/>
                                </p:column>


                                <p:column headerText="#{ism.AnalyseAllowedField_aaenlimitHH}" width="48"
                                          sortBy="#{item.aaenlimitHH}" filterBy="#{item.aaenlimitHH}" 
                                          filterMatchMode="equals" >
                                    <f:facet name="filter">
                                        <p:triStateCheckbox onchange="PF('datalist').filter()" 
                                                            converter="#{triStateBooleanConverter}" 
                                                            stateOneTitle="#{ism.All}" stateTwoTitle="#{ism.Yes}" stateThreeTitle="#{ism.No}"   />
                                    </f:facet>
                                    <div class="text-center">
                                        <p:cellEditor>
                                            <f:facet name="output"><p:triStateCheckbox value="#{item.aaenlimitHH?1:2}" disabled="true"
                                                                                       stateOneTitle="#{ism.All}" stateTwoTitle="#{ism.Yes}" stateThreeTitle="#{ism.No}"   /></f:facet>
                                            <f:facet name="input">
                                                <p:selectBooleanCheckbox id="aaenlimitHH"
                                                                         value="#{item.aaenlimitHH}" 
                                                                         required="true" 
                                                                         requiredMessage="#{ism.AnalyseAllowedRequiredMsg_aaenlimitHH}" 
                                                                         >
                                                    <p:ajax event="change" update="aalimitHH" />
                                                </p:selectBooleanCheckbox>
                                            </f:facet>
                                        </p:cellEditor>
                                    </div>
                                </p:column> 



                                <p:column headerText="#{ism.AnalyseAllowedField_aalimitHH}"  width="78"
                                          sortBy="#{item.aalimitHH}" filterBy="#{item.aalimitHH}" 
                                          filterMatchMode="contains" >
                                    <div class="text-right">
                                        <p:cellEditor>
                                            <f:facet name="output">
                                                <h:outputText class="text-right" value="#{item.aalimitHH}" >
                                                    <f:convertNumber  locale="fr_FR" minFractionDigits="3" />
                                                </h:outputText>
                                            </f:facet>

                                            <f:facet name="input">
                                                <p:inputNumber id="aalimitHH" 
                                                               value="#{item.aalimitHH}" 
                                                               title="#{ism.AnalyseAllowedFieldInfo_aalimitHH}" 
                                                               decimalPlaces="3"
                                                               required="true" requiredMessage="#{ism.AnalyseAllowedRequiredMsg_aalimitHH}" 
                                                               disabled="#{!item.aaenlimitHH}"
                                                               lang="fr_FR"
                                                               />
                                            </f:facet>
                                        </p:cellEditor>
                                    </div>
                                </p:column>



                                <p:column headerText="#{ism.AnalyseAllowedField_aaenlimitH}" width="48"
                                          sortBy="#{item.aaenlimitH}" filterBy="#{item.aaenlimitH}" 
                                          filterMatchMode="equals" >
                                    <f:facet name="filter">
                                        <p:triStateCheckbox onchange="PF('datalist').filter()" 
                                                            converter="#{triStateBooleanConverter}" 
                                                            stateOneTitle="#{ism.All}" stateTwoTitle="#{ism.Yes}" stateThreeTitle="#{ism.No}"   />
                                    </f:facet>
                                    <div class="text-center">
                                        <p:cellEditor>
                                            <f:facet name="output"><p:triStateCheckbox value="#{item.aaenlimitH?1:2}" disabled="true"
                                                                                       stateOneTitle="#{ism.All}" stateTwoTitle="#{ism.Yes}" stateThreeTitle="#{ism.No}"   /></f:facet>
                                            <f:facet name="input">
                                                <p:selectBooleanCheckbox id="aaenlimitH"
                                                                         value="#{item.aaenlimitH}" 
                                                                         required="true" 
                                                                         requiredMessage="#{ism.AnalyseAllowedRequiredMsg_aaenlimitH}" 
                                                                         >
                                                    <p:ajax event="change" update="aalimitH" />
                                                </p:selectBooleanCheckbox>
                                            </f:facet>
                                        </p:cellEditor>
                                    </div>
                                </p:column> 



                                <p:column headerText="#{ism.AnalyseAllowedField_aalimitH}"  width="78"
                                          sortBy="#{item.aalimitH}" filterBy="#{item.aalimitH}" 
                                          filterMatchMode="contains" >
                                    <div class="text-right">
                                        <p:cellEditor>
                                            <f:facet name="output">
                                                <h:outputText class="text-right" value="#{item.aalimitH}" >
                                                    <f:convertNumber  locale="fr_FR" minFractionDigits="3" />
                                                </h:outputText>
                                            </f:facet>

                                            <f:facet name="input">
                                                <p:inputNumber id="aalimitH" 
                                                               value="#{item.aalimitH}" 
                                                               title="#{ism.AnalyseAllowedFieldInfo_aalimitH}" 
                                                               decimalPlaces="3"
                                                               required="true" requiredMessage="#{ism.AnalyseAllowedRequiredMsg_aalimitH}" 
                                                               disabled="#{!item.aaenlimitH}"
                                                               lang="fr_FR"
                                                               />
                                            </f:facet>
                                        </p:cellEditor>
                                    </div>
                                </p:column>



                                <p:column headerText="#{ism.AnalyseAllowedField_aaenlimitB}" width="48"
                                          sortBy="#{item.aaenlimitB}" filterBy="#{item.aaenlimitB}" 
                                          filterMatchMode="equals" >
                                    <f:facet name="filter">
                                        <p:triStateCheckbox onchange="PF('datalist').filter()" 
                                                            converter="#{triStateBooleanConverter}" 
                                                            stateOneTitle="#{ism.All}" stateTwoTitle="#{ism.Yes}" stateThreeTitle="#{ism.No}"   />
                                    </f:facet>
                                    <div class="text-center">
                                        <p:cellEditor>
                                            <f:facet name="output"><p:triStateCheckbox value="#{item.aaenlimitB?1:2}" disabled="true"
                                                                                       stateOneTitle="#{ism.All}" stateTwoTitle="#{ism.Yes}" stateThreeTitle="#{ism.No}"   /></f:facet>
                                            <f:facet name="input">
                                                <p:selectBooleanCheckbox id="aaenlimitB"
                                                                         value="#{item.aaenlimitB}" 
                                                                         required="true" 
                                                                         requiredMessage="#{ism.AnalyseAllowedRequiredMsg_aaenlimitB}" 
                                                                         >
                                                    <p:ajax event="change" update="aalimitB" />
                                                </p:selectBooleanCheckbox>
                                            </f:facet>
                                        </p:cellEditor>
                                    </div>
                                </p:column> 



                                <p:column headerText="#{ism.AnalyseAllowedField_aalimitB}"  width="78"
                                          sortBy="#{item.aalimitB}" filterBy="#{item.aalimitB}" 
                                          filterMatchMode="contains" >
                                    <div class="text-right">
                                        <p:cellEditor>
                                            <f:facet name="output">
                                                <h:outputText class="text-right" value="#{item.aalimitB}" >
                                                    <f:convertNumber  locale="fr_FR" minFractionDigits="3" />
                                                </h:outputText>
                                            </f:facet>

                                            <f:facet name="input">
                                                <p:inputNumber id="aalimitB" 
                                                               value="#{item.aalimitB}" 
                                                               title="#{ism.AnalyseAllowedFieldInfo_aalimitB}" 
                                                               decimalPlaces="3"
                                                               required="true" requiredMessage="#{ism.AnalyseAllowedRequiredMsg_aalimitB}" 
                                                               disabled="#{!item.aaenlimitB}"
                                                               lang="fr_FR"
                                                               />
                                            </f:facet>
                                        </p:cellEditor>
                                    </div>
                                </p:column>



                                <p:column headerText="#{ism.AnalyseAllowedField_aaenlimitBB}" width="48"
                                          sortBy="#{item.aaenlimitBB}" filterBy="#{item.aaenlimitBB}" 
                                          filterMatchMode="equals" >
                                    <f:facet name="filter">
                                        <p:triStateCheckbox onchange="PF('datalist').filter()" 
                                                            converter="#{triStateBooleanConverter}" 
                                                            stateOneTitle="#{ism.All}" stateTwoTitle="#{ism.Yes}" stateThreeTitle="#{ism.No}"   />
                                    </f:facet>
                                    <div class="text-center">
                                        <p:cellEditor>
                                            <f:facet name="output"><p:triStateCheckbox value="#{item.aaenlimitBB?1:2}" disabled="true"
                                                                                       stateOneTitle="#{ism.All}" stateTwoTitle="#{ism.Yes}" stateThreeTitle="#{ism.No}"   /></f:facet>
                                            <f:facet name="input">
                                                <p:selectBooleanCheckbox id="aaenlimitBB"
                                                                         value="#{item.aaenlimitBB}" 
                                                                         required="true" 
                                                                         requiredMessage="#{ism.AnalyseAllowedRequiredMsg_aaenlimitBB}" 
                                                                         >
                                                    <p:ajax event="change" update="aalimitBB" />
                                                </p:selectBooleanCheckbox>
                                            </f:facet>
                                        </p:cellEditor>
                                    </div>
                                </p:column> 



                                <p:column headerText="#{ism.AnalyseAllowedField_aalimitBB}" width="78"
                                          sortBy="#{item.aalimitBB}" filterBy="#{item.aalimitBB}" 
                                          filterMatchMode="contains" >
                                    <div class="text-right">
                                        <p:cellEditor>
                                            <f:facet name="output">
                                                <h:outputText class="text-right" value="#{item.aalimitBB}" >
                                                    <f:convertNumber  locale="fr_FR" minFractionDigits="3" />
                                                </h:outputText>
                                            </f:facet>

                                            <f:facet name="input">
                                                <p:inputNumber id="aalimitBB" 
                                                               value="#{item.aalimitBB}" 
                                                               title="#{ism.AnalyseAllowedFieldInfo_aalimitBB}" 
                                                               decimalPlaces="3"
                                                               required="true" requiredMessage="#{ism.AnalyseAllowedRequiredMsg_aalimitBB}" 
                                                               disabled="#{!item.aaenlimitBB}"
                                                               lang="fr_FR"
                                                               />
                                            </f:facet>
                                        </p:cellEditor>
                                    </div>
                                </p:column>


                                <p:column headerText="#{ism.AnalyseAllowedField_aaDeleted}" width="48"
                                          sortBy="#{item.aaDeleted}" filterBy="#{item.aaDeleted}" 
                                          filterMatchMode="equals" >
                                    <f:facet name="filter">
                                        <p:triStateCheckbox onchange="PF('datalist').filter()" 
                                                            converter="#{triStateBooleanConverter}" 
                                                            stateOneTitle="#{ism.All}" stateTwoTitle="#{ism.Yes}" stateThreeTitle="#{ism.No}"   />
                                    </f:facet>
                                    <div class="text-center">
                                        <p:cellEditor>
                                            <f:facet name="output"><p:triStateCheckbox value="#{item.aaDeleted?1:2}" disabled="true"
                                                                                       stateOneTitle="#{ism.All}" stateTwoTitle="#{ism.Yes}" stateThreeTitle="#{ism.No}"   /></f:facet>
                                            <f:facet name="input">
                                                <p:selectBooleanCheckbox id="aaDeleted"
                                                                         value="#{item.aaDeleted}" 
                                                                         required="true" 
                                                                         >
                                                </p:selectBooleanCheckbox>
                                            </f:facet>
                                        </p:cellEditor>
                                    </div>
                                </p:column> 

                                <script>
                                    $(function () {
                                        $(document).ready(function (e) {
                                            var pickList = $('div[id*=analysePointPickList]');
                                            var sourceWrapper = $('div[id*=analysePointPickList] > div:nth-child(1)');
                                            var buttonsWrapper = $('div[id*=analysePointPickList] > div:nth-child(2)');
                                            var targetWrapper = $('div[id*=analysePointPickList] > div:nth-child(3)');
                                            targetWrapper.addClass("is-state-hide");
                                            var sel = $('.ui-datatable tbody tr td .ui-helper-hidden-accessible input');
                                            var selDiv = $('.ui-datatable tbody tr td:first-child .ui-chkbox .ui-chkbox-box');
                                            var selAllDiv = $('.ui-datatable thead tr  th:nth-child(1) .ui-chkbox .ui-chkbox-box');
                                            console.log(selDiv);
                                            $.ism = "";
                                            $.ism.selDiv = selDiv;
                                            $.selDiv = selDiv;
                                            var selbox = $('.ui-datatable tbody tr td:first-child .ui-chkbox .ui-chkbox-box span');
                                            selbox.removeClass('ui-icon-check');
                                            selbox.addClass('ui-icon-blank');
                                            sel.attr('aria-checked', false);
                                            $(selbox.parentElement).removeClass('ui-state-active');
                                            selDiv.click(function () {
                                                //console.log("sel div click");
                                                var p = $(this.parentElement.parentElement.parentElement);
                                                // console.log(p);
                                                var datari = p.attr('data-ri');
                                                var datark = p.attr('data-rk');
                                                var ariaselected = new Boolean(p.attr('aria-selected'));
                                                if (ariaselected === true) {
                                                    $('.ui-picklist-target li[data-item-label="' + datark + '"] .ui-chkbox-box span').trigger('click');
                                                } else {
                                                    $('.ui-picklist-target li[data-item-label="' + datark + '"] .ui-chkbox-box').trigger('click');
                                                }
                                                //console.log(datari + ' / ' + datark + ' / ' + ariaselected);
                                            });
                                            selAllDiv.click(function () {
                                                console.log("All div click");
                                                var i = 0;
                                                var size = $.selDiv.length;
                                                console.log(size);
                                                $.selDiv.trigger("click");
                                                //console.log("first finished")
                                                //$.selDiv.trigger("click");
                                                console.log("click end")
                                            });
                                        });
                                    });

                                </script>
                            </p:dataTable>
                        </div>



                    </div>



                    <div class="row">
                        <div class="col-md-12">
                            <h:panelGroup id="btn-crud-zone_id"  >

                                <p:commandButton icon="ui-btn-Save"
                                                 styleClass="ui-btn"
                                                 value="#{ism.Save}" 
                                                 actionListener="#{analyseAllowedView.create}" 
                                                 update=":bodyForm,:growl" 
                                                 rendered="true"
                                                 />

                                <p:commandButton icon="ui-btn-Cancel"
                                                 styleClass="ui-btn"
                                                 value="#{ism.Cancel}" 
                                                 update=":bodyForm,:growl"
                                                 actionListener="#{analyseAllowedController.prepareCreate()}"
                                                 action="./List.xhtml?faces-redirect=true"
                                                 immediate="true"
                                                 />

                            </h:panelGroup>
                        </div>
                    </div>

                    <div  class="row">
                        <div class="col-md-12">
                            <p:messages id="MsgDetail" showDetail="true" showSummary="true" escape="true"/>
                        </div>
                    </div>
                </div>

            </h:form>



        </ui:define>





        <ui:define name="west" id="west">
            <h:panelGroup id="westGroup">
                <p:commandButton icon="ui-btn-Save"
                                 styleClass="options-btn"
                                 value="#{ism.Save}" 
                                 actionListener="#{analyseAllowedController.create}" 
                                 update=":bodyForm,:growl" 
                                 rendered="#{analyseAllowedController.isOnMultiCreation}"
                                 form="bodyForm"
                                 />
                <p:commandButton icon="ui-btn-SaveOne"
                                 styleClass="options-btn"
                                 value="#{ism.Save}" 
                                 actionListener="#{analyseAllowedController.createUnReleasded()}" 
                                 update=":bodyForm,:growl"
                                 action="List.xhtml?faces-redirect=true"
                                 rendered="#{!analyseAllowedController.isOnMultiCreation}"
                                 form="bodyForm"
                                 />

                <p:commandButton icon="ui-btn-Cancel"
                                 styleClass="options-btn"
                                 value="#{ism.Cancel}" 
                                 update=":bodyForm,:growl"
                                 actionListener="#{analyseAllowedController.prepareCreate()}"
                                 action="./List.xhtml?faces-redirect=true"
                                 immediate="true"
                                 />

            </h:panelGroup>
        </ui:define>
    </ui:composition>
</html>
