<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core" 
    xmlns:p="http://primefaces.org/ui"
    xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
    >

    <h:head>
        <!-- STANDARD CONFIG -->
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta http-equiv="refresh" 
              content="60;url=#{request.contextPath}#{request.servletPath}/logout.xhtml?faces-redirect=true"/>

        <!-- ISM TITLE PAGE -->
        <title>#{ism.AppName}</title>

        <!-- ISM LOGO -->
        <link rel="shortcut icon" href="#{resource['img/ism/favico.png']}" type="image/x-png" /> 



        <f:facet name="last">
            <!-- CSS - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
            <!-- CSS - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
            <!-- CSS - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
            <!-- CSS - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
            <!-- Font-Awesome -->
            <h:outputStylesheet library="webjars" name="font-awesome/4.7.0/css/font-awesome.min-jsf.css"/>

            <!-- Bootstrap -->
            <h:outputStylesheet library="webjars" name="cropper/3.1.3/dist/cropper.min.css" />
            <h:outputStylesheet library="webjars" name="bootstrap/4.0.0-beta.2/css/bootstrap.min-jsf.css" />

            <!-- ISM -->
            <h:outputStylesheet library="css" name="ism-login.min.css" />
            <!--
            <h:outputStylesheet library="css" name="ism.min.css" />
            -->
            <!-- JS  - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
            <!-- JS  - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
            <!-- JS  - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
            <!-- JS  - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

            <!-- PRIMEFACES  -->
            <h:outputScript library="primefaces" name="jquery/jquery.js" target="head" />

            <!-- JQUERY UI : NECESSAIRE POUR L'USAGE DE DATRERANGE PICKER -->
            <h:outputScript library="vendor" name="jquery-ui/1.12.1/jquery-ui.min.js" target="head" />

            <!-- Bootstrap -->
            <h:outputScript library="webjars" name="popper.js/1.12.9/dist/umd/popper.min.js" />
            <h:outputScript library="webjars" name="bootstrap/4.0.0-beta.2/js/bootstrap.bundle.min.js" />
        </f:facet>
    </h:head>



    <h:body id="body" style="background-color: rgba(41, 43, 44, 0.07)!important;" >



        <!-- Content -->
        <div class="container-fluid " >
            <div class="area-bg" style="height: 100vh;">
                <div class="area-content">


                    <div class="justify-content-center">
                        <!-- *********************************************** -->
                        <!-- Insertion de l'image de l'application au centre -->
                        <!-- *********************************************** -->
                        <div class="row ">
                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12 align-self-center" >
                                <center style="background-color: rgba(41, 43, 44, 0.07)!important;">
                                    <h:graphicImage value="#{resource['img/ism/ism.png']}"  
                                                    width="96px" height="96px"
                                                    />
                                    <div style="padding: 10px;">#{ism.AppName} - #{ism.AppVersion}</div>
                                </center>
                            </div>
                        </div>

                        <!-- *********************************************** -->
                        <!-- Insertion d'un message d'acceuil                -->
                        <!-- *********************************************** -->
                        <div class="row py-2">
                            <div class="col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                <center><div id="welcome">Au revoir</div></center>
                            </div>
                        </div>

                    </div>
                    <!-- *********************************************** -->
                    <!-- Création de la zone centrale de contenu login   -->
                    <!-- *********************************************** -->
                    <div class="row py-4">
                        <div class="col-sm-4"></div>
                        <div class="col-sm-4">

                            <div class="card">

                                <!-- *********************************************** -->
                                <!-- Card Header : Invitation de connexion           -->
                                <!-- *********************************************** -->
                                <div class="card-header">
                                    <div class="d-flex justify-content-center">
                                        <span class="fa fa-5x fa-universal-access" />
                                    </div>
                                    <div class="d-flex justify-content-center small">Au plaisir de vous revoir</div>
                                </div>

                                <!-- *********************************************** -->
                                <!-- Card Body : Corp de connexion           -->
                                <!-- *********************************************** -->
                                <div class="card-body p-3">
                                    <h:form id="Form">
                                        <div class="input-group input-group-sm small p-0 mb-2" data-toggle="tooltip" data-placement="left" title="Retourner à l'application">
                                            <p:commandButton id="btnGoToLogin"
                                                             value="#{ism.LogIn} [#{request.session.maxInactiveInterval}]"
                                                             action="index.xhtml?faces-redirect=true" 
                                                             actionListener="#{staffAuthController.logout()}"
                                                             class="btn btn-primary bg-primary"
                                                             icon="fa fa-address-card"
                                                             style="width: 100%"
                                                             />
                                        </div>

                                    </h:form>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-4"></div>

                    </div>

                </div>
            </div>
        </div>

    </h:body>
    <p:blockUI block="body" trigger="Form:btnGoToLogin">
        <p:graphicImage width="48px" height="48px" library="img" name="ism/std/Onload.gif"/>
    </p:blockUI>
    <script>
        // Redirect user to https
        window.onload = function () {
            if (window.location.href.indexOf('http://') === 0)
                window.location = 'https://' + window.location.hostname + ':8181' + window.location.pathname + window.location.search;
        };
        $(function () {
            $('[data-toggle="tooltip"]').tooltip();
        })
    </script>

</html>



