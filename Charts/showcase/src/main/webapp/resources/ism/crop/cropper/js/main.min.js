
$(function(){var f=window.console||{log:function(){}};var m=window.URL||window.webkitURL;var c=$(".img-container img");var n=$("#download");var l=$("#dataX");var k=$("#dataY");var i=$("#dataHeight");var b=$("#dataWidth");var p=$("#dataRotate");var h=$("#dataScaleX");var g=$("#dataScaleY");var o={aspectRatio:16/9,preview:".img-preview",crop:function(q){l.val(Math.round(q.x));k.val(Math.round(q.y));i.val(Math.round(q.height));b.val(Math.round(q.width));p.val(q.rotate);h.val(q.scaleX);g.val(q.scaleY)}};var e=c.attr("src");var a="image/jpeg";var j;$('[data-toggle="tooltip"]').tooltip();c.on({ready:function(q){f.log(q.type)},cropstart:function(q){f.log(q.type,q.action)},cropmove:function(q){f.log(q.type,q.action)},cropend:function(q){f.log(q.type,q.action)},crop:function(q){f.log(q.type,q.x,q.y,q.width,q.height,q.rotate,q.scaleX,q.scaleY)},zoom:function(q){f.log(q.type,q.ratio)}}).cropper(o);if(!$.isFunction(document.createElement("canvas").getContext)){$('button[data-method="getCroppedCanvas"]').prop("disabled",true)}if(typeof document.createElement("cropper").style.transition==="undefined"){$('button[data-method="rotate"]').prop("disabled",true);$('button[data-method="scale"]').prop("disabled",true)}if(typeof n[0].download==="undefined"){n.addClass("disabled")}$(".docs-toggles").on("change","input",function(){var u=$(this);var r=u.attr("name");var s=u.prop("type");var t;var q;if(!c.data("cropper")){return}if(s==="checkbox"){o[r]=u.prop("checked");t=c.cropper("getCropBoxData");q=c.cropper("getCanvasData");o.ready=function(){c.cropper("setCropBoxData",t);c.cropper("setCanvasData",q)}}else{if(s==="radio"){o[r]=u.val()}}c.cropper("destroy").cropper(o)});$(".docs-buttons").on("click","[data-method]",function(){var w=$(this);var t=w.data();var s=c.data("cropper");var v;var r;var q;if(w.prop("disabled")||w.hasClass("disabled")){return}if(s&&t.method){t=$.extend({},t);if(typeof t.target!=="undefined"){r=$(t.target);if(typeof t.option==="undefined"){try{t.option=JSON.parse(r.val())}catch(u){f.log(u.message)}}}v=s.cropped;switch(t.method){case"rotate":if(v&&o.viewMode>0){c.cropper("clear")}break;case"getCroppedCanvas":if(a==="image/jpeg"){if(!t.option){t.option={}}t.option.fillColor="#fff"}break}q=c.cropper(t.method,t.option,t.secondOption);switch(t.method){case"rotate":if(v&&o.viewMode>0){c.cropper("crop")}break;case"scaleX":case"scaleY":$(this).data("option",-t.option);break;case"getCroppedCanvas":if(q){$("#getCroppedCanvasModal").modal().find(".modal-body").html(q);if(!n.hasClass("disabled")){n.attr("href",q.toDataURL(a))}}break;case"destroy":if(j){m.revokeObjectURL(j);j="";c.attr("src",e)}break}if($.isPlainObject(q)&&r){try{r.val(JSON.stringify(q))}catch(u){f.log(u.message)}}}});$(document.body).on("keydown",function(q){if(!c.data("cropper")||this.scrollTop>300){return}switch(q.which){case 37:q.preventDefault();c.cropper("move",-1,0);break;case 38:q.preventDefault();c.cropper("move",0,-1);break;case 39:q.preventDefault();c.cropper("move",1,0);break;case 40:q.preventDefault();c.cropper("move",0,1);break}});var d=$("#inputImage");if(m){d.change(function(){var r=this.files;var q;if(!c.data("cropper")){return}if(r&&r.length){q=r[0];if(/^image\/\w+$/.test(q.type)){a=q.type;if(j){m.revokeObjectURL(j)}j=m.createObjectURL(q);c.cropper("destroy").attr("src",j).cropper(o);d.val("")}else{window.alert("Please choose an image file.")}}})}else{d.prop("disabled",true).parent().addClass("disabled")}});